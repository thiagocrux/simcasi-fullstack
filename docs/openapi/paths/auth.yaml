login:
  post:
    operationId: loginUser
    summary: Login
    description: Handles user authentication through email and password, initiates a secure stateful session, and provides both access and refresh JWT tokens together with essential user information.
    tags:
      - Authentication
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/auth.yaml#/LoginRequest'
          examples:
            validCredentials:
              summary: Valid user credentials
              value:
                email: dr.silva@simcasi.gov.br
                password: SecurePass#2026
                ipAddress: 192.168.1.100
                userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
    responses:
      '200':
        description: User successfully authenticated with tokens issued (OK).
        content:
          application/json:
            schema:
              $ref: '../components/schemas/auth.yaml#/AuthResponse'
            examples:
              successfulLogin:
                summary: Successful authentication response
                value:
                  accessToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5YzA4ZjVlYi0xMjM0LTU2NzgtOWFiYy1kZWYwMTIzNDU2NzgiLCJlbWFpbCI6ImRyLnNpbHZhQHNpbWNhc2kuZ292LmJyIiwiaWF0IjoxNzM3NTA0MDAwLCJleHAiOjE3Mzc1MDc2MDB9.Xj8K9L2mN3pQ4rS5tU6vW7xY8zA9bC0dE1fG2hI3jK4
                  refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5YzA4ZjVlYi0xMjM0LTU2NzgtOWFiYy1kZWYwMTIzNDU2NzgiLCJ0eXBlIjoicmVmcmVzaCIsImlhdCI6MTczNzUwNDAwMCwiZXhwIjoxNzM4MTA4ODAwfQ.A1bC2dE3fG4hI5jK6lM7nO8pQ9rS0tU1vW2xY3zA4b
                  user:
                    id: 9c08f5eb-1234-5678-9abc-def012345678
                    name: Dr. Jo√£o Silva
                    email: dr.silva@simcasi.gov.br
                    roleId: a1b2c3d4-5678-90ab-cdef-1234567890ab
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedError'
      '422':
        $ref: '../components/responses.yaml#/ValidationError'

refresh:
  post:
    operationId: refreshToken
    summary: Refresh token
    description: Performs secure token rotation by validating the current refresh token and issuing a new access/refresh pair, thereby extending the user's session lifecycle.
    tags:
      - Authentication
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/auth.yaml#/RefreshRequest'
          examples:
            validRefreshToken:
              summary: Valid refresh token request
              value:
                refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5YzA4ZjVlYi0xMjM0LTU2NzgtOWFiYy1kZWYwMTIzNDU2NzgiLCJ0eXBlIjoicmVmcmVzaCIsImlhdCI6MTczNzUwNDAwMCwiZXhwIjoxNzM4MTA4ODAwfQ.A1bC2dE3fG4hI5jK6lM7nO8pQ9rS0tU1vW2xY3zA4b
                ipAddress: 192.168.1.100
                userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
    responses:
      '200':
        description: New token pair successfully issued and rotated (OK).
        content:
          application/json:
            schema:
              $ref: '../components/schemas/auth.yaml#/AuthResponse'
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedError'

logout:
  post:
    operationId: logoutUser
    summary: Logout
    description: Securely terminates the active session and blacklists the associated refresh token, preventing any subsequent reuse.
    tags:
      - Authentication
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - sessionId
            properties:
              sessionId:
                type: string
                description: Unique identifier of the session to terminate.
          examples:
            logoutRequest:
              summary: Logout request with session identifier
              value:
                sessionId: 9c08f5eb-1234-5678-9abc-def012345678
    responses:
      '204':
        description: Session successfully terminated and tokens invalidated (No Content).
      '401':
        $ref: '../components/responses.yaml#/UnauthorizedError'
